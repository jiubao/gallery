!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.gallery=n()}(this,function(){"use strict";var t=["webkit","moz","ms","o"],Q=t.reduce(function(t,n){return t||window[n+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),Z=t.reduce(function(t,n){return t||window[n+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!Q||!Z){var e=0;Q=function(t){var n=+new Date;return e=Math.max(n,e+16),setTimeout(t,e-n)},Z=clearTimeout}function n(t){var n=!1;function e(){}var r=Object.defineProperty({},"passive",{get:function(){n=!0}});return window.addEventListener("testPassive",e,r),window.removeEventListener("testPassive",e,r),n}var i=!!n()&&{capture:!1,passive:!0},O=function(t,n,e,r){return void 0===r&&(r=i),t.addEventListener(n,e,r),function(){return m(t,n,e,r)}},m=function(t,n,e,r){return void 0===r&&(r=i),t.removeEventListener(n,e,r)},H=function(r){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];return t.reduce(function(t,n,e){return t+n+r[e+1]},r[0])},r=document.documentElement,N=function(){return r.clientHeight},j=function(){return r.clientWidth},k="_src_style_css_bg",A="_src_style_css_swiper",L="_src_style_css_wrap",T="_src_style_css_disableTransition",R=Object.freeze(['\n      <div class="','" style="padding: 0 ','px;">\n        <div class="','" style="width: ','px;">\n          <img data-gallery-index="','" src="','" style="width: ',"px; height: ",'px;"/>\n        </div>\n      </div>\n    ']),C=Object.freeze(['\n<div class="','">\n  <div class="','"></div>\n  <div class="','" style="margin-left: -',"px; width: ",'px;">\n    <div class="','">\n    ',"\n    </div>\n  </div>\n</div>\n"]),q=~~(j()/15);document.documentElement;var x=function(t){return{x:t.pageX,y:t.pageY}};function D(e){var r,n,i,o,t,a,s=window.phase=(r=0,n=1,i={idle:0},o=function(t){return"number"==typeof t?t:i[t]},t=function(e,t){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.forEach(function(t){return e(t)}),a}},a={v:function(){return r},or:t(function(t){return r|=o(t)}),rm:t(function(t){return r&=~o(t)}),add:t(function(t){i[t]=n,n<<=1}),is:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.reduce(function(t,n){return t&&!!(r&o(n))},!0)},set:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r=t.reduce(function(t,n){return t|o(n)},0),a}},a).add("start","move","end","scroll","pinch","pan","swipe"),u=!1,c=0,l=-1,f=-1,d={tap:[],single:[],double:[],start:[],move:[],end:[],scroll:[],scrollend:[],pan:[],panstart:[],panend:[],pinch:[],pinchstart:[],pinchend:[],swipe:[]},h={},p={start:[],last:[],current:[]},v=function(t){return d[t].forEach(function(t){return t(p,h,s)})},y=function(){u&&(Q(y),v("move"),s.is("scroll")&&v("scroll"),s.is("swipe")&&v("swipe"),s.is("pinch")&&v("pinch"),s.is("pan")&&v("pan"))},w=function(n,t){if(e=t,Array.isArray(e)||e instanceof Array)return t.forEach(function(t){return w(n,t)});var e;"string"==typeof t&&(p[t][0]=x(n.touches[0])),1<n.touches.length?p[t][1]=x(n.touches[1]):p[t].splice(1,10)};return O(e,"touchstart",function(t){w(t,["start","last","current"]),h=t.target,s.set("start"),1<t.touches.length&&s.or("pinch"),v("start"),s.is("pinch")?v("pinchstart"):v("panstart"),s.is("pinch")||(l=Date.now())}),O(e,"touchmove",function(t){p.last=p.current,w(t,"current"),1<t.touches.length?s.rm("pan").or("pinch"):(s.is("pinch")&&(w(t,"start"),v("start")),s.rm("pinch").or("pan")),s.is("start")&&!s.is("pinch")&&Math.abs(p.current[0].x-p.start[0].x)<Math.abs(p.current[0].y-p.start[0].y)&&s.or("scroll"),s.is("pan")&&!s.is("scroll")&&s.or("swipe"),s.rm("start").or("move"),u||(u=!0,y())}),O(e,"touchend",function(t){if(s.rm("start","move").or("end"),v("end"),s.is("scroll")&&v("scrollend"),s.is("pinch")&&v("pinchend"),s.is("pan")&&v("panend"),u=!1,!s.is("pinch")&&!s.is("pan")){var n=Date.now();n-l<=200&&(v("tap"),c=n-f<=300?c+1:1,f=n,1===c?setTimeout(function(){return 1===c&&v("single")},300):2===c&&v("double"))}}),{on:function(t,n){return d[t].push(n),function(){return m(e,t,n)}},off:function(t,n){return d[t].splice(d[t].indexOf(n),1)}}}function tt(t){var n=this;t.forEach(function(t){return n.append(t)})}tt.prototype.append=function(t){var n=t.$next=t.$prev=t;return this.$tail?(n.$prev=this.$tail,n.$next=this.$tail.$next,(this.$tail.$next=n).$next.$prev=n,this.$tail=n):this.$head=this.$tail=n};var o=!!n()&&{capture:!1,passive:!0},nt=function(t,n,e,r){void 0===r&&(r=o),t.addEventListener(n,e,r)},et=function(t,n,e,r){void 0===r&&(r=o),t.removeEventListener(n,e,r)},rt=function(t){return"function"==typeof t},it=function(t){var n=t.getBoundingClientRect();return n.top<window.innerHeight&&0<n.bottom&&n.left<window.innerWidth&&0<n.right},ot={cubic:function(t){return--t*t*t+1},circ:function(t){return Math.sqrt(1-Math.pow(t-1,2))}},at="touchstart",st="touchmove",ut="touchend",ct=function(t,n){return window.getComputedStyle(t,null).getPropertyValue(n)};function lt(){this.value=0}lt.prototype={is:function(t){return this.value&t},or:function(t){return this.value=this.value|t,this},rm:function(t){return this.value=this.value&~t,this},set:function(t){return this.value=t,this}};var ft={root:null,rootMargin:"0px",threshold:[0,.01]},dt=!!window.IntersectionObserver,ht={auto:!1,cycle:!0,expose:!1,root:null,elms:[],index:0,width:window.screen.width,height:200,css:!1,ease:"cubic",plugins:[],initHandlers:[],startHandlers:[],moveHandlers:[],endHandlers:[],animationEndHandlers:[]},pt=document.createElement("div");function I(t){var a=Object.assign({},ht,t),s=a.index,u=a.root,l=a.elms,c=a.width,f=a.height,d=a.cycle,h=(a.expose,a.auto),p=a.css,v=a.ease;a.plugins.forEach(function(n){return Object.keys(n).forEach(function(t){return a[t+"Handlers"].push(n[t])})});var n=function(r){return function(){for(var t=arguments,n=[],e=arguments.length;e--;)n[e]=t[e];return a[r+"Handlers"].forEach(function(t){return t.apply(null,n)})}},y=n("init"),e=n("start"),i=n("move"),w=n("end");if(u){p&&(c=Number(ct(u,"width").slice(0,-2)),f=Number(ct(u,"height").slice(0,-2)));var m=u.children[0],x={main:-1,auto:-1},g=c/3,b={idle:0,start:1,drag:2,animate:4,scroll:8,auto:16,cancel:32},$=new lt,r=0,E=0,o=0,_=0,z=0,M=0,O=0,H=0,N=[],j=!1;h=d&&h;var k=l[s],A=function(t,n){var e,r;t.x=n,r=n,(e=t)&&(e.style.transition=e.style.webkitTransition="",e.style.transform=e.style.webkitTransform="translate3d("+r+"px, 0, 0)",i(k.$index,k,m,l))},L=function(t){return pt.appendChild(t)},T=function(t){return m.appendChild(t)},R=function(t){return!d&&M<O&&k===N.$head},C=function(t){return!d&&O<=M&&k===N.$tail},q=function(t){return clearTimeout(x.auto)},D=function(t){return q($.set(b.cancel))},I=function(t){q(),Z(x.main)},S=!0;return function(){if(0===l.length)return y(-1);u.style.position="relative",p||(u.style.width=c+"px",u.style.height=f+"px");var t=2===l.length&&d;t&&(l.push(l[0].cloneNode(!0)),T(l[2]),l.push(l[1].cloneNode(!0)),T(l[3]),l[0].$index=l[2].$index=0,l[1].$index=l[3].$index=1);var n=1===l.length;if(j=2===l.length,N=new tt(l),t||l.forEach(function(t,n){return t.$index=n}),A(k,0),n||j||A(k.$prev,-c),n||A(k.$next,c),l.forEach(function(t){t.style.position="absolute",p||(t.style.width=c+"px",t.style.height=f+"px"),j||n||t===k||t===k.$prev||t===k.$next||L(t)}),n)return y(k.$index,k,m,l);if(j||d||0!==s||L(k.$prev),j||d||s!==l.length-1||L(k.$next),K(),nt(u,at,W),nt(u,st,X),nt(u,ut,V),h){if(dt)Q(function(){a.unobserve=function(t,n){if(!dt)return n();var e=new IntersectionObserver(n,ft);return e.observe(t),function(){e.unobserve(t)}}(u,function(t){t&&0===t[0].intersectionRatio?D():G()})});else{var e=function(){return it(u)?Y():D()};nt(window,"touchmove",function(){return it(u)||D()}),nt(window,"touchend",e),e()}var r=["webkit","moz","ms","-"].reduce(function(t,n){return void 0!==document[t[0]]?t:[n+"Hidden",n+"visibilitychange"]},["hidden","visibilitychange"]),i=r[0],o=r[1];"-"!==i[0]&&document.addEventListener(o,function(){return document[i]?D():Y()},!1)}m.x=0,y(k.$index,k,m,l)}(),{destroy:K,index:function(t){return k.$index},on:function(t,n){var e=a[t+"Handlers"];return e.push(n),function(){return e.splice(e.indexOf(n),1)}},stop:function(){return S=!1},start:function(){return S=!0}}}function W(t){if(S){I(),$.or(b.start).rm(b.scroll),o=0;var n=t.touches[0];z=Date.now(),E=O=M=n.pageX,H=n.clientY,e(k.$index,k,m,l)}}function X(t){if(S&&!$.is(b.scroll)){var n=t.touches[0],e=n.pageX-O;if($.is(b.start)&&2*Math.abs(e)<Math.abs(n.clientY-H))$.or(b.scroll).rm(b.start);else{var r=0<e?1:-1;o!==r&&(E=O,z=Date.now(),o=r),$.set(b.drag),O=n.pageX,A(m,_+=e)}}}function F(){j||L(k.$next),k=k.$prev,R()||(A(k.$prev,k.x-c),T(k.$prev))}function P(){j||L(k.$prev),k=k.$next,C()||(A(k.$next,k.x+c),T(k.$next))}function U(){0===r&&-k.x-_>c/2&&(r=1,P())}function Y(){q(),x.auto=setTimeout(function(){S&&B()},3e3)}function B(){r=0,$.set(b.auto),e(k.$index,k,m,l),J(m,_,-k.x-c,2e3/3,U,Y)}function G(){3<Math.abs(_+k.x)?B():Y()}function V(t){if(S){if($.is(b.scroll)&&!$.is(b.animate)&&!$.is(b.auto))return h&&G();$.set(b.animate);var n=E<O,e=Date.now()-z<120;if(!R()&&!C()){var r=k.x+_;e?n&&0<r?F():!n&&r<0&&P():g<r?F():r<-g&&P()}var i=-1*k.x,o=Math.min(Math.max(1e3*Math.abs(i-_)/c,250),2e3/3);J(m,_,i,e?250:o,null,h?function(){return G()}:null)}}function J(r,i,o,a,s,u){var c=Date.now();!function t(){var n=Date.now()-c;if(a<=n&&(_=o),rt(s)&&s(),a<=n)return A(r,o),!$.is(b.cancel)&&rt(u)&&u(),$.set(b.idle),w(k.$index,k,m,l);var e=(o-i)*ot[v](n/a)+i;A(r,_=e),x.main=Q(t)}()}function K(){I(),rt(a.unobserve)&&a.unobserve(),et(u,at,W),et(u,st,X),et(u,ut,V)}}pt.style.display="none",document.body.appendChild(pt);var S=function(t,n,e,r){return t.style.transform="translate3d("+n+"px,"+e+"px,0) scale("+r+")"},W=function(t,n){return t.style.opacity=n},X=function(t){return setTimeout(t,353)},F=function(t){return t.getBoundingClientRect()},P=function(t,n){return{x:.5*(t.x+n.x),y:.5*(t.y+n.y)}},a=function(t){return t*t},U=function(t,n){return Math.sqrt(a(t.x-n.x)+a(t.y-n.y))},Y={selector:"data-gallery-item",dataset:"galleryItem"};return function(t){var n=Object.assign({},Y,t),l=[],f=function(t){return l[Number(t.dataset.galleryIndex)]},d={init:{x:0,y:0,z:1,w:0,h:0},start:{x:0,y:0,z:1,w:0,h:0},last:{x:0,y:0,z:1,w:0,h:0},current:{x:0,y:0,z:1,w:0,h:0}},i=n.selector,o=n.dataset,a=document.createElement("div");document.body.appendChild(a);var h,p,s,u,r=!1,e=[],c=function(t){return e.push(t)};c(O(document,"click",function(t){var n,e=t.target;if("IMG"===e.tagName&&o in e.dataset){l.splice(0,l.length),document.querySelectorAll("img["+i+"]").forEach(function(t,n){t.dataset.galleryIndex=n;var e,r,i,o,a,s,u=t.naturalWidth,c=t.naturalHeight;l[n]={elm:t,w:u,h:c,r:u/c,src:t.src,i:n},l[n].shape=(e=f(t),r=j(),i=N(),o=r/i>e.r,a=o?i*e.r:r,s=o?i:r/e.r,{x:o?(r-a)/2:0,y:o?0:(i-s)/2,w:a,h:s,z:1})});var r=f(e);d.init=r.shape,a.innerHTML=H(C,"_src_style_css_gallery",k,A,q,(n=l)[0].shape.w+2*q,"_src_style_css_swiperWrap",n.map(function(t){return H(R,"_src_style_css_swiperItem",q,L,t.shape.w,t.i,t.src,t.shape.w,t.shape.h)}).join("")),Q(function(){return function(e){var t=e.elm;v=a.childNodes[1],p=v.querySelector("."+k),s=v.querySelector("."+A);var r=F(t);w(),l.forEach(function(t){t.wrap=v.querySelector("."+L+' img[data-gallery-index="'+t.i+'"]').parentElement,t.i===e.i?S(t.wrap,r.left,r.top,r.width/d.init.w):S(t.wrap,t.shape.x,t.shape.y,1);var n=D(t.wrap);Object.keys($).forEach(function(t){return c(n.on(t,$[t]))})}),h=e.wrap,(u=I({root:s,elms:Array.prototype.slice.apply(s.children[0].children),auto:!1,index:e.i,expose:!0,css:!0})).on("end",function(t){h=l[t].wrap,d.init=l[t].shape,b=!1}),v.style.display="block",Q(function(){_()})}(r)})}}));var v,y=function(){return t=v,n=new RegExp("(\\s|^)"+T+"(\\s|$)"),void(t.className=t.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));var t,n},w=function(){return r=n=T,void((e=t=v).className&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(e.className)||(t.className+=(t.className?" ":"")+n));var t,n,e,r},m=function(){return u.stop()},x=function(){return u.start()},g="",b=!1,$={single:function(t,n){ga("single"),z(n)},double:function(t,n){if(ga("double.zoom: ",g),"out"!==g){y();var e=d.init;if("in"===g)S(h,e.x,e.y,1);else{var r=M({x:2*e.x-t.start[0].x,y:2*e.y-t.start[0].y,w:2*e.w,h:2*e.h}),i=r.x,o=r.y;S(h,i,o,2)}X(function(){return w()})}},scroll:function(t,n){if(u.stop(),""===g){var e=t.current[0].y-t.start[0].y;S(h,d.init.x,d.init.y+e,1);var r=1-Math.abs(2*e/N());W(p,0<r?r:0)}},scrollend:function(t,n){""===g&&(Math.abs(t.current[0].y-t.start[0].y)/N()>1/7?z(n,x):(y(),S(h,d.init.x,d.init.y,1),W(p,1),X(function(){w(),x()})))},pinch:function(t,n){m();var e,r=U((e=t).current[0],e.current[1])/U(e.start[0],e.start[1]),i=P(t.start[0],t.start[1]),o=P(t.current[0],t.current[1]),a=o.x-(i.x-d.start.x)*r,s=o.y-(i.y-d.start.y)*r,u=r*d.start.z;if(g=1<u?"in":u<1?"out":"",S(h,a,s,u),"out"===g){var c=F(f(n).elm);d.start.z<=1&&W(p,(d.current.w-c.width)/(d.init.w-c.width))}},pinchend:function(t,n){"out"===g&&(d.start.z<=1?z(n,x):_(0,x))},pan:function(t,n,e){if("in"===g){m();var r=t.current[0].x-t.start[0].x+d.start.x,i=t.current[0].y-t.start[0].y+d.start.y;S(h,r,i,d.start.z)}},start:function(t,n){var e=F(n);d.start.x=d.last.x=d.current.x=e.x,d.start.y=d.last.y=d.current.y=e.y,d.start.w=d.last.w=d.current.w=e.width,d.start.h=d.last.h=d.current.h=e.height;var r=d.start.z=d.last.z=d.current.z=e.width/d.init.w;g=1<r?"in":r<1?"out":""},move:function(t,n){var e=F(n);d.current.x=e.x,d.current.y=e.y,d.current.w=e.width,d.current.h=e.height,d.current.z=e.width/d.init.w},end:function(t,n,e){if(e.is("pan")||e.is("pinch")){if("in"!==g)return;var r=d.current,i=M(r),o=i.x,a=i.y;if(o===r.x&&a===r.y)return;y(),S(h,o,a,r.z),X(function(){return w()})}},swipe:function(){b=!0}};return Object.keys($).forEach(function(e){var r=$[e];$[e]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];b&&"onswipe"!==e||r.apply(null,t)}}),v={destroy:E};function E(){e.splice(1,e.length).forEach(function(t){return t()})}function _(t,n){y(),S(h,d.init.x,d.init.y,1),W(p,1),X(function(){r=!!w(),n&&n()})}function z(t,n){if(!r){r=!0,y();var e=F(f(t).elm);S(h,e.left,e.top,e.width/d.init.w),W(p,0),X(function(){r=!(v.style.display="none"),E(),n&&n()})}}function M(t){var n=t.x,e=t.y,r=t.w,i=t.h,o=j(),a=N();return r<o?n=(o-r)/2:0<n?n=0:n<o-r&&(n=o-r),i<a?e=(a-i)/2:0<e?e=0:e<a-i&&(e=a-i),{x:n,y:e}}}}),function(t,n,e){e.setAttribute("rel","stylesheet"),e.setAttribute("href",URL.createObjectURL(new Blob([4,0,6,0,5,0,7,0,30,10,1,4,0,6,0,5,0,7,0,25,10,1,4,0,6,0,5,0,7,0,37,10,1,4,0,6,0,5,0,7,0,55,10,1,4,0,6,0,5,0,7,0,54,10,1,4,0,6,0,5,0,7,0,53,13,23,3,19,2,24,3,19,2,34,3,33,11,2,63,3,33,11,2,40,8,56,3,67,8,40,2,12,9,4,0,6,0,5,0,7,0,30,10,1,4,0,6,0,5,0,7,0,25,10,1,4,0,6,0,5,0,7,0,22,10,1,4,0,6,0,5,0,7,0,37,13,57,3,62,2,12,9,4,0,6,0,5,0,7,0,30,13,66,3,14,2,16,3,65,2,48,8,60,3,69,2,58,3,14,2,28,8,32,3,14,2,26,8,29,3,14,2,12,9,4,0,6,0,5,0,7,0,25,13,16,3,18,2,68,3,71,70,2,27,3,35,1,42,36,1,39,8,41,21,44,10,1,19,10,1,45,10,1,43,20,2,35,3,19,2,12,9,4,0,6,0,5,0,7,0,22,13,16,3,18,2,17,8,59,3,24,1,23,2,27,3,17,1,42,36,1,39,8,41,21,44,10,1,19,10,1,45,10,1,43,20,2,28,8,32,3,14,2,26,8,29,3,14,2,12,9,4,0,6,0,5,0,7,0,22,1,61,13,34,3,33,11,2,28,8,32,3,14,2,26,8,29,3,14,2,12,9,4,0,6,0,5,0,7,0,31,13,16,3,18,2,24,3,15,11,2,23,3,15,11,2,17,3,52,21,8,15,11,10,1,8,15,11,20,2,12,46,47,1,4,31,8,64,1,13,9,1,1,16,3,1,18,2,9,1,1,24,3,1,15,11,2,9,1,1,17,3,1,51,21,8,15,11,20,2,9,12,9,9,4,31,8,49,1,13,9,1,1,16,3,1,18,2,9,1,1,23,3,1,15,11,2,9,1,1,17,3,1,50,21,8,15,11,20,2,9,12,1,47,46,9,4,0,6,0,5,0,7,0,38,1,4,0,6,0,5,0,7,0,25,10,1,4,0,6,0,5,0,7,0,38,1,4,0,6,0,5,0,7,0,22,13,27,3,14,2,12].map(function(t){return n[t]}),{type:"text/css"}))),URL.revokeObjectURL(e.getAttribute("href"))}(0,["_"," ",";",":",".","style","src","css","-","\n",",","%","}","{","none","50","position","transform","absolute","0",")","(","wrap","top","left","bg","user","transition","touch","select","gallery","center","action","100","width","opacity","ms","full","disableTransition","cubic","box","bezier","333","1","0.4","0.22","/","*","z","v","translateY","translateX","translate","swiperWrap","swiperItem","swiper","sizing","overflow","outline","origin","index","img","hidden","height","h","fixed","display","border","background","9999","000","#"],document.head.appendChild(document.createElement("link")));