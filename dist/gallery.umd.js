!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.gallery=n()}(this,function(){"use strict";var t=["webkit","moz","ms","o"],U=t.reduce(function(t,n){return t||window[n+"RequestAnimationFrame"]},window.requestAnimationFrame).bind(window),n=t.reduce(function(t,n){return t||window[n+"CancelAnimationFrame"]},window.cancelAnimationFrame).bind(window);if(!U||!n){var e=0;U=function(t){var n=+new Date;return e=Math.max(n,e+16),setTimeout(t,e-n)},n=clearTimeout}var i=!!function(t){var n=!1;function e(){}var r=Object.defineProperty({},"passive",{get:function(){n=!0}});return window.addEventListener("testPassive",e,r),window.removeEventListener("testPassive",e,r),n}()&&{capture:!1,passive:!0},D=function(t,n,e,r){return void 0===r&&(r=i),t.addEventListener(n,e,r),function(){return w(t,n,e,r)}},w=function(t,n,e,r){return void 0===r&&(r=i),t.removeEventListener(n,e,r)},H="_src_style_css_bg",P="_src_style_css_wrap",a="_src_style_css_disableTransition",S=Object.freeze(['\n<div class="','">\n  <div class="','"></div>\n  <div class="','">\n    <img data-gallery-index="','" src="','" style="width: ',"px; height: ",'px;" />\n  </div>\n</div>\n']);document.documentElement;var x=function(t){return{x:t.pageX,y:t.pageY}};function $(e){var r,n,i,a,t,c,o=window.phase=(r=0,n=1,i={idle:0},a=function(t){return"number"==typeof t?t:i[t]},t=function(e,t){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.forEach(function(t){return e(t)}),c}},c={v:function(){return r},or:t(function(t){return r|=a(t)}),rm:t(function(t){return r&=~a(t)}),add:t(function(t){i[t]=n,n<<=1}),is:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.reduce(function(t,n){return t&&!!(r&a(n))},!0)},set:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return r=t.reduce(function(t,n){return t|a(n)},0),c}},c).add("start","move","end","scroll","pinch","pan"),u=!1,s=0,l=-1,f=-1,d={tap:[],single:[],double:[],start:[],move:[],end:[],scroll:[],scrollend:[],pan:[],panstart:[],panend:[],pinch:[],pinchstart:[],pinchend:[]},h={},p={start:[],last:[],current:[]},y=function(t){return d[t].forEach(function(t){return t(p,h,o)})},v=function(){u&&(U(v),y("move"),o.is("scroll")&&y("scroll"),o.is("pinch")&&y("pinch"),o.is("pan")&&y("pan"))},m=function(n,t){if(e=t,Array.isArray(e)||e instanceof Array)return t.forEach(function(t){return m(n,t)});var e;"string"==typeof t&&(p[t][0]=x(n.touches[0])),1<n.touches.length?p[t][1]=x(n.touches[1]):p[t].splice(1,10)};return D(e,"touchstart",function(t){m(t,["start","last","current"]),h=t.target,o.set("start"),1<t.touches.length&&o.or("pinch"),y("start"),o.is("pinch")?y("pinchstart"):y("panstart"),o.is("pinch")||(l=Date.now())}),D(e,"touchmove",function(t){p.last=p.current,m(t,"current"),1<t.touches.length?o.rm("pan").or("pinch"):(o.is("pinch")&&(m(t,"start"),y("start")),o.rm("pinch").or("pan")),o.is("start")&&!o.is("pinch")&&Math.abs(p.current[0].x-p.start[0].x)<Math.abs(p.current[0].y-p.start[0].y)&&o.or("scroll"),o.rm("start").or("move"),u||(u=!0,v())}),D(e,"touchend",function(t){if(o.rm("start","move").or("end"),y("end"),o.is("scroll")&&y("scrollend"),o.is("pinch")&&y("pinchend"),o.is("pan")&&y("panend"),u=!1,!o.is("pinch")&&!o.is("pan")){var n=Date.now();n-l<=200&&(y("tap"),s=n-f<=300?s+1:1,f=n,1===s?setTimeout(function(){return 1===s&&y("single")},300):2===s&&y("double"))}}),{on:function(t,n){return d[t].push(n),function(){return w(e,t,n)}},off:function(t,n){return d[t].splice(d[t].indexOf(n),1)}}}var B=function(t,n,e,r){return t.style.transform="translate3d("+n+"px,"+e+"px,0) scale("+r+")"},f=function(t,n){return t.style.opacity=n},r=document.documentElement,W=function(){return r.clientHeight},X=function(){return r.clientWidth},s=function(t){return setTimeout(t,353)},Y=function(t){return t.getBoundingClientRect()},d=function(t,n){return{x:.5*(t.x+n.x),y:.5*(t.y+n.y)}},c=function(t){return t*t},h=function(t,n){return Math.sqrt(c(t.x-n.x)+c(t.y-n.y))},p={selector:"data-gallery-item",dataset:"galleryItem"};return function(t){var y=Object.assign({},p,t),v=[],m=function(t){return v[Number(t.dataset.galleryIndex)]},w={init:{x:0,y:0,z:1,w:0,h:0},start:{x:0,y:0,z:1,w:0,h:0},last:{x:0,y:0,z:1,w:0,h:0},current:{x:0,y:0,z:1,w:0,h:0}},x=y.selector,g=y.dataset,b=document.createElement("div");document.body.appendChild(b);var z,_,e=!1,n=[],E=function(t){return n.push(t)};E(D(document,"click",function(t){var n,e,r,i,a,c,o,u,s,l,f,d,h=t.target;if("IMG"===h.tagName&&g in h.dataset){v.splice(0,v.length),document.querySelectorAll("img["+x+"]").forEach(function(t,n){t.dataset.galleryIndex=n;var e=t.naturalWidth,r=t.naturalHeight;v[n]={elm:t,w:e,h:r,r:e/r}});var p=(n=m(h),a=(i=(e=X())/(r=W())>n.r)?r*n.r:e,c=i?r:e/n.r,o=i?(e-a)/2:0,u=i?0:(r-c)/2,w.init={x:o,y:u,w:a,h:c,z:1},w.init);b.innerHTML=(s=h.src,l=p.w,f=p.h,d=h.dataset.galleryIndex,function(r){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];return t.reduce(function(t,n,e){return t+n+r[e+1]},r[0])}(S,"_src_style_css_gallery",H,P,d,s,l,f)),U(function(){return function(t){A=b.childNodes[1],z=A.querySelector("."+P),_=A.querySelector("."+H);var n=Y(t);L(),B(z,n.left,n.top,n.width/w.init.w);var e=y.gesture=window.ges=$(z);E(e.on("single",M)),E(e.on("double",R)),E(e.on("scroll",T)),E(e.on("scrollend",j)),E(e.on("pinch",k)),E(e.on("pinchend",q)),E(e.on("pan",C)),E(e.on("start",O)),E(e.on("move",I)),E(e.on("end",F)),A.style.display="block",U(function(){N()})}(h)})}}));var A,o=function(){return t=A,n=new RegExp("(\\s|^)"+a+"(\\s|$)"),void(t.className=t.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));var t,n},L=function(){return r=n=a,void((e=t=A).className&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(e.className)||(t.className+=(t.className?" ":"")+n));var t,n,e,r},l="";return A={destroy:r};function r(){n.splice(1,n.length).forEach(function(t){return t()})}function N(t){o(),B(z,w.init.x,w.init.y,1),f(_,1),s(function(){return e=!!L()})}function i(t){if(!e){e=!0,o();var n=Y(m(t).elm);B(z,n.left,n.top,n.width/w.init.w),f(_,0),s(function(){e=!(A.style.display="none"),r()})}}function M(t,n){ga("single"),i(n)}function R(t,n){if(ga("double.zoom: ",l),"out"!==l){o();var e=w.init;if("in"===l)B(z,e.x,e.y,1);else{var r=u({x:2*e.x-t.start[0].x,y:2*e.y-t.start[0].y,w:2*e.w,h:2*e.h}),i=r.x,a=r.y;B(z,i,a,2)}s(function(){return L()})}}function T(t,n){if(""===l){var e=t.current[0].y-t.start[0].y;B(z,w.init.x,w.init.y+e,1);var r=1-Math.abs(2*e/W());f(_,0<r?r:0)}}function j(t,n){""===l&&(Math.abs(t.current[0].y-t.start[0].y)/W()>1/7?i(n):(o(),B(z,w.init.x,w.init.y,1),f(_,1),s(function(){return L()})))}function k(t,n){var e,r=h((e=t).current[0],e.current[1])/h(e.start[0],e.start[1]),i=d(t.start[0],t.start[1]),a=d(t.current[0],t.current[1]),c=a.x-(i.x-w.start.x)*r,o=a.y-(i.y-w.start.y)*r,u=r*w.start.z;if(l=1<u?"in":u<1?"out":"",B(z,c,o,u),"out"===l){var s=Y(m(n).elm);w.start.z<=1&&f(_,(w.current.w-s.width)/(w.init.w-s.width))}}function q(t,n){"out"===l&&(w.start.z<=1?i(n):N())}function O(t,n){var e=Y(n);w.start.x=w.last.x=w.current.x=e.x,w.start.y=w.last.y=w.current.y=e.y,w.start.w=w.last.w=w.current.w=e.width,w.start.h=w.last.h=w.current.h=e.height;var r=w.start.z=w.last.z=w.current.z=e.width/w.init.w;l=1<r?"in":r<1?"out":""}function I(t,n){var e=Y(n);w.current.x=e.x,w.current.y=e.y,w.current.w=e.width,w.current.h=e.height,w.current.z=e.width/w.init.w}function C(t,n,e){if("in"===l){var r=t.current[0].x-t.start[0].x+w.start.x,i=t.current[0].y-t.start[0].y+w.start.y;B(z,r,i,w.start.z)}}function F(t,n,e){if(e.is("pan")||e.is("pinch")){if("in"!==l)return;var r=w.current,i=u(r),a=i.x,c=i.y;if(a===r.x&&c===r.y)return;o(),B(z,a,c,r.z),s(function(){return L()})}}function u(t){var n=t.x,e=t.y,r=t.w,i=t.h,a=X(),c=W();return r<a?n=(a-r)/2:0<n?n=0:n<a-r&&(n=a-r),i<c?e=(c-i)/2:0<e?e=0:e<c-i&&(e=c-i),{x:n,y:e}}}}),function(t,n,e){e.setAttribute("rel","stylesheet"),e.setAttribute("href",URL.createObjectURL(new Blob([6,0,8,0,7,0,9,0,36,10,1,6,0,8,0,7,0,9,0,30,10,1,6,0,8,0,7,0,9,0,22,10,1,6,0,8,0,7,0,9,0,59,13,23,3,19,2,24,3,19,2,33,3,32,11,2,57,3,32,11,2,51,3,56,2,12,5,6,0,8,0,7,0,9,0,36,13,61,3,14,2,16,3,60,2,46,4,54,3,63,2,52,3,14,2,27,4,31,3,14,2,25,4,28,3,14,2,12,5,6,0,8,0,7,0,9,0,30,13,16,3,18,2,62,3,65,64,2,26,3,34,1,40,35,1,38,4,39,21,42,10,1,19,10,1,43,10,1,41,20,2,34,3,19,2,12,5,6,0,8,0,7,0,9,0,22,13,16,3,18,2,17,4,53,3,24,1,23,2,26,3,17,1,40,35,1,38,4,39,21,42,10,1,19,10,1,43,10,1,41,20,2,27,4,31,3,14,2,25,4,28,3,14,2,12,5,6,0,8,0,7,0,9,0,22,1,55,13,33,3,32,11,2,27,4,31,3,14,2,25,4,28,3,14,2,12,5,6,0,8,0,7,0,9,0,29,13,16,3,18,2,24,3,15,11,2,23,3,15,11,2,17,3,50,21,4,15,11,10,1,4,15,11,20,2,12,44,45,1,6,29,4,58,1,13,5,1,1,16,3,1,18,2,5,1,1,24,3,1,15,11,2,5,1,1,17,3,1,49,21,4,15,11,20,2,5,12,5,5,6,29,4,47,1,13,5,1,1,16,3,1,18,2,5,1,1,23,3,1,15,11,2,5,1,1,17,3,1,48,21,4,15,11,20,2,5,12,1,45,44,5,6,0,8,0,7,0,9,0,37,1,6,0,8,0,7,0,9,0,30,10,1,6,0,8,0,7,0,9,0,37,1,6,0,8,0,7,0,9,0,22,13,26,3,14,2,12].map(function(t){return n[t]}),{type:"text/css"}))),URL.revokeObjectURL(e.getAttribute("href"))}(0,["_"," ",";",":","-","\n",".","style","src","css",",","%","}","{","none","50","position","transform","absolute","0",")","(","wrap","top","left","user","transition","touch","select","center","bg","action","100","width","opacity","ms","gallery","disableTransition","cubic","bezier","333","1","0.4","0.22","/","*","z","v","translateY","translateX","translate","overflow","outline","origin","index","img","hidden","height","h","full","fixed","display","background","9999","000","#"],document.head.appendChild(document.createElement("link")));